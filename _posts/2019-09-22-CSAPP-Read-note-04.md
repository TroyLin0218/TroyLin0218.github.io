---

layout: post
title: 【读书笔记】《深入理解计算机系统》读书笔记(四)
categories: Reading-notes
description: 读书笔记
keywords: 读书笔记,CS:APP

---

## 程序的机器级表示  Round-1

计算机执行机器代码，用字节序列编码底层操作，包括处理数据、管理内存、读写存储设备上的数据，以及利用网络通信等。编译器基于编程语言的规则、目标机器的指令集和操作系统遵循的惯例，经过一系列阶段生成机器代码，也就是开头说的字节序列。

#####  程序编码

计算机系统使用了多种不同形式的抽象，对于机器级编程来说，两种抽象比较重要：
* 指令集体系结构或指令集架构（ISA)：定义了处理器状态、指令的格式，以及每条指令对状态的影响
* 内存的抽象，机器把存储器模型看做一个非常大的字节数组

#####  数据格式
标准int值存储为双字（32位）.指针（在此用char*表示）存储为8字节的四字.
浮点数主要有两种形式：
* 单精度（4字节）值，对应于C语言数据类型float；
* 双精度（8字节）值，对应于C语言数据类型double.

GCC生成的汇编代码指令字符的后缀，表明操作数的大小。例如，数据传送指令有四个变种：
* `movb`（传送字节）、`movw`（传送字）、`movl`（传送双字）、`movq`（传送四字）.

* 后缀'l'用来表示双字，因为32位数被看成是'长字（long word）'.

##### 访问信息
* x86-64 的 CPU 包含一组 16 个存储 64 位值的通用目的寄存器，用来存储整数数据和指针.

* 传送指令两个操作数不能都指向内存位置。`MOV` 指令只会更新目的操作数指定的那些寄存器字节或内存位置。唯一的例外是 `movl` 指令以寄存器作为目的时，会把寄存器的高位 4 字节设置为 0、`movq`指令只能以表示为 32 位补码数字的立即数作为源操作数，然后把这个值符号扩展得到 64 位的值，放到目的位置.

*  操作数的三种类型
   * 立即数（immediate），用来表示常数值.
   * 寄存器（register），它表示某个寄存器的内容，16个寄存器的低位1字节、2字节、4字节或8字节中的一个作为操作数，这些字节数分别对应于8位、16位、32位或64位.
   * 内存引用，它会根据计算出来的地址（通常称为有效地址）访问某个内存位置.